# azure-pipelines.yml
# Multi-stage pipeline that runs with NO hosted/self-hosted agent
# Uses agentless (server) jobs + Delay task

trigger:
- main
- develop

pr:
- main
- develop

stages:
- stage: Build
  displayName: "Build (customer-experience-ui-ci)"
  jobs:
  - job: Build
    displayName: "Build - agentless"
    pool: server
    steps:
    - task: Delay@1
      displayName: "Simulate build work"
      inputs:
        delayForMinutes: "1"

- stage: Test
  displayName: "Test (customer-experience-ui-ci)"
  dependsOn: Build
  jobs:
  - job: Test
    displayName: "Test - agentless"
    pool: server
    steps:
    - task: Delay@1
      displayName: "Simulate test work"
      inputs:
        delayForMinutes: "1"

- stage: Deploy
  displayName: "Deploy (customer-experience-ui-ci)"
  dependsOn: Test
  jobs:
  - job: Deploy
    displayName: "Deploy - agentless"
    pool: server
    steps:
    - task: Delay@1
      displayName: "Simulate deploy work"
      inputs:
        delayForMinutes: "1"
